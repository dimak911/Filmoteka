var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequire7dbb;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,a.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequire7dbb=a),a("bUb57");var i,r=a("edYM8"),s=a("gWoIc");s=a("gWoIc"),s=a("gWoIc");i=JSON.parse('{"genres":[{"id":28,"name":"Action"},{"id":12,"name":"Adventure"},{"id":16,"name":"Animation"},{"id":35,"name":"Comedy"},{"id":80,"name":"Crime"},{"id":99,"name":"Documentary"},{"id":18,"name":"Drama"},{"id":10751,"name":"Family"},{"id":14,"name":"Fantasy"},{"id":36,"name":"History"},{"id":27,"name":"Horror"},{"id":10402,"name":"Music"},{"id":9648,"name":"Mystery"},{"id":10749,"name":"Romance"},{"id":878,"name":"Science Fiction"},{"id":10770,"name":"TV Movie"},{"id":53,"name":"Thriller"},{"id":10752,"name":"War"},{"id":37,"name":"Western"}]}');r=a("edYM8");function o(e){const{title:t,genre_ids:n,release_date:a,poster_path:s,id:o}=e;let l="";void 0!==a&&a.length>4&&(l=a.slice(0,4));const d=function(e){let t=i.genres.reduce(((t,{id:n,name:a})=>(e.includes(n)&&t.push(a),t)),[]);t.length>3&&(t=t.slice(0,2),t.push("Other"));return t}(n).join(", ");return null===s?`<li>\n            <a class="gallery__link" href="#">\n              <img class="gallery__image" data-id="${o}" src="https://dummyimage.com/395x574/000/fff.jpg&text=no+poster" alt="${t} movie poster" loading="lazy">\n            \n            <div class="info">\n              <p class="info__item">${t}</p>\n              <div class="info-detail">\n                <p class="info-detail__item">${d}</p>\n                <p class="info-detail__item">${l}</p>\n              </div>\n            </div>\n            </a>\n          </li>`:`<li>\n            <a class="gallery__link" href="#">\n              <img class="gallery__image" data-id="${o}" src="${r.BASE_IMG_URL}${s}" alt="${t} movie poster" loading="lazy">\n            \n            <div class="info">\n              <h3 class="info__item">${t}</h3>\n              <div class="info-detail">\n                <p class="info-detail__item">${d}</p>\n                <p class="info-detail__item">${l}</p>\n              </div>\n            </div>\n            </a>\n          </li>`}r=a("edYM8");var l=a("gjiCh");const d=document.querySelector(".gallery");function c(e){const t=e.map((e=>o(e))).join("");d&&(d.innerHTML=t)}function u(){document.querySelector(".gallery").insertAdjacentHTML("beforeEnd",'<li class="ad-card">\n            <a class="gallery__link ad-card-link" href="#">\n              <div class="gallery__image ad-card-content-wrapper">\n                <p class="ad-title">Здесь может быть ваша реклама</p>\n                <div class="ad-content">\n                  <p class="ad-text">Продам гараж</br>Недорого</p>\n                  <p class="ad-number">066-222-33-44</br>Саша Репета</p>\n                </div>\n              </div>\n            </a>\n          </li>')}function p(){9*Math.random()+1>=5?u():document.querySelector(".gallery").insertAdjacentHTML("beforeEnd",'<li class="ad-card">\n            <a class="gallery__link ad-card-link" href="#">\n              <div class="gallery__image ad-card-content-wrapper">\n                <p class="ad-title">Здесь может быть ваша реклама</p>\n                <div class="ad-content">\n                  <p class="ad-text">Продам BMW X5</br>Не бита</br>Не крашена</p>\n                  <p class="ad-number">066-222-33-44</br>Саша Репета</p>\n                </div>\n              </div>\n            </a>\n          </li>')}(0,l.startLoader)(),(async()=>{const e=await(0,s.getMovies)(r.TREND_URL);c(e.results),u(),(0,l.stopLoader)(),localStorage.setItem("LAST_REQUESTED_URL",r.TREND_URL),f(e.page,e.total_pages)})();var m=a("74Aiq");l=a("gjiCh");const g=document.querySelector(".pagination-wrap");function f(e,t){let n=[];e>1&&n.push(_(e-1,!0,"arrow-left")),e>=4&&n.push(_(1,!0,"first-button")),e>=5&&n.push(y()),e>=2&&(e>=3&&n.push(_(e-2)),n.push(_(e-1))),n.push(_(e,!1)),e<=t-1&&(n.push(_(e+1)),e<=t-2&&n.push(_(e+2))),e<t-3&&n.push(y()),e<=t-3&&n.push(_(t,!0,"last-button")),e<t&&n.push(_(e+1,!0,"arrow-right")),g.innerHTML="",n.forEach((e=>g.append(e)))}function y(){const e=document.createElement("span");return e.innerHTML='<span class="dots">...</span>',e}function _(e,t=!0,n=null){const a=function(){const e=document.createElement("button");return e.classList.add("pagination-button"),e}();return a.dataset.page=e,a.textContent=n&&n.includes("arrow")?"":e,n&&a.classList.add(n),t?a.addEventListener("click",v):a.classList.add("pagination-button--current"),a}async function v(e){const t=e.target.dataset.page,n=`${localStorage.getItem("LAST_REQUESTED_URL")}&page=${t}`;(0,l.startLoader)(),(0,m.topFunction)(),await(0,s.getMovies)(n).then((e=>{c(e.results),p(),f(e.page,e.total_pages)})),(0,l.stopLoader)()}s=a("gWoIc"),r=a("edYM8"),l=a("gjiCh");const L={btnToday:document.querySelector('button[data-group="today"]'),filterBg:document.querySelector(".background__filter"),btnWeek:document.querySelector('button[data-group="week"]'),gallery:document.querySelector(".gallery"),form:document.querySelector(".header__form"),filter:document.querySelector(".filter"),toTrendingBtn:document.querySelector(".to-trending__button"),failSearchText:document.querySelector(".not-succesful-search-text")},{btnToday:h,filterBg:S,btnWeek:T,gallery:E,form:b,filter:w,toTrendingBtn:R,failSearchText:q}=L;let $=h.parentNode.parentNode,M=T.parentNode.parentNode,U=1;function k(e){(0,s.getMovies)(e).then((e=>{c(e.results),p()}))}async function A(){U=document.querySelector(".pagination-button--current").dataset.page;const e=`${r.BASE_URL}/trending/movie/week?api_key=${r.API_KEY}`;w.classList.remove("is-hidden"),R.classList.add("is-hidden"),b.reset(),M.classList.contains(".selected")||((0,l.startLoader)(),$.classList.remove("selected"),M.classList.add("selected"),S.classList.add("to-right"),localStorage.setItem("LAST_REQUESTED_URL",e),await k(e+`&page=${U}`),g.classList.remove("visually-hidden"),q.classList.add("visually-hidden"),setTimeout((()=>{(0,l.stopLoader)()}),200))}R.addEventListener("click",A),h.addEventListener("click",(async()=>{U=document.querySelector(".pagination-button--current").dataset.page;const e=`${r.BASE_URL}/trending/movie/day?api_key=${r.API_KEY}`;$.classList.contains(".selected")||((0,l.startLoader)(),$.classList.add("selected"),M.classList.remove("selected"),S.classList.remove("to-right"),localStorage.setItem("LAST_REQUESTED_URL",e),await k(e+`&page=${U}`),setTimeout((()=>{(0,l.stopLoader)()}),200))})),T.addEventListener("click",(async()=>{U=document.querySelector(".pagination-button--current").dataset.page;const e=`${r.BASE_URL}/trending/movie/week?api_key=${r.API_KEY}`;M.classList.contains(".selected")||((0,l.startLoader)(),$.classList.remove("selected"),M.classList.add("selected"),S.classList.add("to-right"),localStorage.setItem("LAST_REQUESTED_URL",e),await k(e+`&page=${U}`),setTimeout((()=>{(0,l.stopLoader)()}),200))}));l=a("gjiCh");const x={form:document.querySelector(".header__form"),input:document.querySelector(".header__form-input"),gallery:document.querySelector(".gallery"),loader:document.querySelector(".backdrop-loader"),failSearchText:document.querySelector(".not-succesful-search-text")};function D(e){const t=`${r.SEARCH_URL}&query=${e}`;return localStorage.setItem("LAST_REQUESTED_URL",t),(0,s.getMovies)(t)}let I="";function N(){x.gallery.innerHTML=""}x.form&&x.form.addEventListener("submit",(async function(e){if(e.preventDefault(),I=e.currentTarget.query.value.trim(),""===I)return;w.classList.add("is-hidden"),R.classList.remove("is-hidden"),N(),(0,l.startLoader)();const t=await D(I);if((0,l.stopLoader)(),e.target.reset(),!t.total_results)return g.classList.add("visually-hidden"),void x.failSearchText.classList.remove("visually-hidden");c(t.results),f(t.page,t.total_pages)})),x.input&&x.input.addEventListener("input",function(e,t,n){let a,i,r,s,o,l,d=0,c=!1,u=!1,p=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);function m(t){let n=a,r=i;return a=i=void 0,d=t,s=e.apply(r,n),s}function g(e){return d=e,o=setTimeout(y,t),c?m(e):s}function f(e){let n=e-l;return void 0===l||n>=t||n<0||u&&e-d>=r}function y(){const e=Date.now();if(f(e))return _(e);o=setTimeout(y,function(e){let n=t-(e-l);return u?nativeMin(n,r-(e-d)):n}(e))}function _(e){return o=void 0,p&&a?m(e):(a=i=void 0,s)}function v(){let e=Date.now(),n=f(e);if(a=arguments,i=this,l=e,n){if(void 0===o)return g(l);if(u)return o=setTimeout(y,t),m(l)}return void 0===o&&(o=setTimeout(y,t)),s}return t=Number(t)||0,"object"==typeof n&&(c=!!n.leading,u="maxWait"in n,r=u?nativeMax(Number(n.maxWait)||0,t):r,p="trailing"in n?!!n.trailing:p),v.cancel=function(){void 0!==o&&clearTimeout(o),d=0,a=l=i=o=void 0},v.flush=function(){return void 0===o?s:_(Date.now())},v}((async function(e){if(I=e.target.value.trim(),""===I)return void A();w.classList.add("is-hidden"),R.classList.remove("is-hidden"),(0,l.startLoader)(),N();const t=await D(I);if((0,l.stopLoader)(),!t.total_results)return g.classList.add("visually-hidden"),void x.failSearchText.classList.remove("visually-hidden");c(t.results),f(t.page,t.total_pages)}),500)),a("5I0Ww"),a("baGT8"),a("74Aiq"),a("lJ5oQ"),a("kThre");
//# sourceMappingURL=index.f64c4105.js.map
