var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},t={},a=e.parcelRequire7dbb;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in t){var a=t[e];delete t[e];var i={id:e,exports:{}};return n[e]=i,a.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,n){t[e]=n},e.parcelRequire7dbb=a),a("bUb57");var i,o=a("edYM8"),r=a("gWoIc");a("gWoIc"),r=a("gWoIc");i=JSON.parse('{"genres":[{"id":28,"name":"Action"},{"id":12,"name":"Adventure"},{"id":16,"name":"Animation"},{"id":35,"name":"Comedy"},{"id":80,"name":"Crime"},{"id":99,"name":"Documentary"},{"id":18,"name":"Drama"},{"id":10751,"name":"Family"},{"id":14,"name":"Fantasy"},{"id":36,"name":"History"},{"id":27,"name":"Horror"},{"id":10402,"name":"Music"},{"id":9648,"name":"Mystery"},{"id":10749,"name":"Romance"},{"id":878,"name":"Science Fiction"},{"id":10770,"name":"TV Movie"},{"id":53,"name":"Thriller"},{"id":10752,"name":"War"},{"id":37,"name":"Western"}]}');o=a("edYM8");function s(e){const{title:n,genre_ids:t,release_date:a,poster_path:r,id:s}=e;let l="";void 0!==a&&a.length>4&&(l=a.slice(0,4));const d=function(e){let n=i.genres.reduce(((n,{id:t,name:a})=>(e.includes(t)&&n.push(a),n)),[]);n.length>3&&(n=n.slice(0,2),n.push("Other"));return n}(t).join(", ");return null===r?`<li>\n            <a class="gallery__link" href="#">\n              <img class="gallery__image" data-id="${s}" src="https://dummyimage.com/395x574/000/fff.jpg&text=no+poster" alt="${n} movie poster" loading="lazy">\n            \n            <div class="info">\n              <p class="info__item">${n}</p>\n              <div class="info-detail">\n                <p class="info-detail__item">${d}</p>\n                <p class="info-detail__item">${l}</p>\n              </div>\n            </div>\n            </a>\n          </li>`:`<li>\n            <a class="gallery__link" href="#">\n              <img class="gallery__image" data-id="${s}" src="${o.BASE_IMG_URL}${r}" alt="${n} movie poster" loading="lazy">\n            \n            <div class="info">\n              <h3 class="info__item">${n}</h3>\n              <div class="info-detail">\n                <p class="info-detail__item">${d}</p>\n                <p class="info-detail__item">${l}</p>\n              </div>\n            </div>\n            </a>\n          </li>`}o=a("edYM8");const l=document.querySelector(".gallery");function d(e){const n=e.map((e=>s(e))).join("");l&&(l.innerHTML=n)}(async()=>{const e=await(0,r.getMovies)(o.TREND_URL);d(e.results),localStorage.setItem("LAST_REQUESTED_URL",o.TREND_URL),p(e.page,e.total_pages)})();const c=document.querySelector(".pagination-wrap"),u=document.querySelector(".backdrop-loader");function p(e,n){let t=[];e>1&&t.push(g(e-1,!0,"arrow-left")),e>=4&&t.push(g(1,!0,"first-button")),e>=5&&t.push(m()),e>=2&&(e>=3&&t.push(g(e-2)),t.push(g(e-1))),t.push(g(e,!1)),e<=n-1&&(t.push(g(e+1)),e<=n-2&&t.push(g(e+2))),e<n-3&&t.push(m()),e<=n-3&&t.push(g(n,!0,"last-button")),e<n&&t.push(g(e+1,!0,"arrow-right")),c.innerHTML="",t.forEach((e=>c.append(e)))}function m(){const e=document.createElement("span");return e.innerHTML='<span class="dots">...</span>',e}function g(e,n=!0,t=null){const a=function(){const e=document.createElement("button");return e.classList.add("pagination-button"),e}();return a.dataset.page=e,a.textContent=t&&t.includes("arrow")?"":e,t&&a.classList.add(t),n?a.addEventListener("click",f):a.classList.add("pagination-button--current"),a}function f(e){const n=e.target.dataset.page,t=`${localStorage.getItem("LAST_REQUESTED_URL")}&page=${n}`;u.classList.remove("backdrop-loader--is-hidden"),(0,r.getMovies)(t).then((e=>{u.classList.add("backdrop-loader--is-hidden"),d(e.results),p(e.page,e.total_pages)}))}const _={form:document.querySelector(".header__form"),gallery:document.querySelector(".gallery"),loader:document.querySelector(".backdrop-loader")};_.form&&_.form.addEventListener("submit",(async function(e){e.preventDefault(),_.loader.classList.remove("backdrop-loader--is-hidden"),_.gallery.innerHTML="",h=e.currentTarget.query.value.trim();const n=await function(e){const n=`${o.SEARCH_URL}&query=${e}`;return localStorage.setItem("LAST_REQUESTED_URL",n),(0,r.getMovies)(n)}(h);_.loader.classList.add("backdrop-loader--is-hidden"),e.target.reset(),d(n.results),p(n.page,n.total_pages)}));let h="";a("5I0Ww"),a("baGT8"),a("74Aiq");
//# sourceMappingURL=index.e52e724b.js.map
