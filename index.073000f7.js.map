{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,uCAKA,MAAMC,EAAO,CACTC,KAAMC,SAASC,cAAc,iBAC7BC,QAASF,SAASC,cAAc,aAEhCH,EAAKC,MACLD,EAAKC,KAAKI,iBAAiB,UAoBxBC,eAA4BC,GAC/BA,EAAEC,iBAgBFR,EAAKI,QAAQK,UAAY,GAZzBC,EAAaH,EAAEI,cAAcC,MAAMC,MAAMC,OAEzC,MAAMC,QAfH,SAAsBC,GACzB,MAAMC,EAAY,GAAGnB,EAAAoB,oBAAoBF,IAEzC,OADAG,aAAaC,QAAQ,qBAAsBH,IACpC,EAAAI,EAAAC,WAAUL,E,CAYGM,CAAab,GAEjCH,EAAEiB,OAAOC,SAET,EAAAC,EAAAC,kBAAiBZ,EAAMa,UACvB,EAAAC,EAAAC,kBAAiBf,EAAMgB,KAAMhB,EAAMiB,Y,IAdvC,IAAItB,EAAa,G","sources":["src/js/search.js"],"sourcesContent":["import { API_KEY, SEARCH_URL } from './api/api-vars';\nimport { getMovies } from './api/fetch-movie.js';\nimport { renderPagination } from './pagination'; //Viktor;\nimport { renderMovieCards } from './render-movie-cards';\n\nconst refs = {\n    form: document.querySelector('.header__form'),\n    gallery: document.querySelector('.gallery'),\n}\nif (refs.form) {\n    refs.form.addEventListener('submit', onFormSubmit);\n}\n\n\n\n// export function searchMovies(movie, pageNumber) {\n//     return getMovies(\n//         `${SEARCH_URL}?api_key=${API_KEY}&query=${movie}&page=${pageNumber}`\n//     ); \n// }\n\n//Viktor rewrited function: save searchUrl to localStorage for using in pagination;\nexport function searchMovies(searchText) {\n    const searchUrl = `${SEARCH_URL}&query=${searchText}`;\n    localStorage.setItem('LAST_REQUESTED_URL', searchUrl)\n    return getMovies(searchUrl); \n}\n\nlet searchText = '';\n\nexport async function onFormSubmit(e) {\n    e.preventDefault();\n    \n    clearGallery();\n    \n    searchText = e.currentTarget.query.value.trim();\n    \n    const muvie = await searchMovies(searchText);\n\n    e.target.reset();\n\n    renderMovieCards(muvie.results);\n    renderPagination(muvie.page, muvie.total_pages);  //Viktor: renderPagination function added\n    \n}\n\nfunction clearGallery() {\n    refs.gallery.innerHTML = '';\n}\n\n\n\n\n\n\n\n"],"names":["$iUA6h","parcelRequire","$d35904b1c7f1c41e$var$refs","form","document","querySelector","gallery","addEventListener","async","e","preventDefault","innerHTML","$d35904b1c7f1c41e$var$searchText","currentTarget","query","value","trim","muvie","searchText1","searchUrl","SEARCH_URL","localStorage","setItem","$4g74k","getMovies","$d35904b1c7f1c41e$export$b0c4d3ac9887d994","target","reset","$gIhuz","renderMovieCards","results","$jcFG7","renderPagination","page","total_pages"],"version":3,"file":"index.073000f7.js.map"}