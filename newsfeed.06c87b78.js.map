{"mappings":"giBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAK,SACLC,GAAQ,IAAIC,MAAOC,cAAcC,MAAM,EAAG,IAAIC,MAAML,GAAOM,KAAK,IAChEC,EA8DN,WACE,MAAMC,EAAM,IAAIN,KAEhB,OAAO,IAAIA,KAAKM,EAAIC,cAAeD,EAAIE,WAAYF,EAAIG,UAAY,GAChER,cACAC,MAAM,EAAG,G,CAnEQQ,GAAmBP,MAAML,GAAOM,KAAK,KAK3DO,eAA2BC,GACzB,IAGE,aAFqBC,EAAAjB,GAAMkB,IAAIF,IAEjBG,KAAKC,Q,CACnB,MAAOC,GACPC,QAAQD,MAAMA,E,GAIlBE,CAbiB,+EAA+Ed,cAA0BN,8EAapGqB,MAAKC,KAI3B,SAAoBC,GAClB,MAAMC,EAAiBD,EAAKE,KAAIC,GAOlC,SAA8BC,GAC5B,MACEC,QAAUC,SAAUC,EAAS,aAC7BC,SAAUC,EACVC,UAAYC,KAAMC,GAClBC,OAAQC,EACRC,QAASC,EACTC,QAAS3B,EAAG4B,WACZA,EACAC,eAAgBC,GACdhB,EAEEiB,EAAMH,EAAWI,MAAKnB,GAAQ,OAAOoB,KAAKpB,EAAKqB,WACrD,IAAIC,EAAU,GAKZA,EAHGJ,EAvCmB,4BA0CQA,EAAI/B,IAFxB,gCAKZ,MAAO,8EACuCmC,WAAiBT,oIAEnBJ,6EACsBI,uDACrBI,yDACE9B,gJACYwB,qEACAP,yEACIE,4C,CArCvBiB,CAAqBvB,KAAOrB,KAAK,IAEzE6C,SACGC,cAAc,aACdC,mBAAmB,YAAa5B,E,CARnC6B,CAAW/B,EAAagC,KAAK,I","sources":["src/js/newsfeed-render.js"],"sourcesContent":["import axios from 'axios';\n\nconst regex = /[0-9]/g;\nconst today = new Date().toISOString().slice(0, 10).match(regex).join('');\nconst lastWeeksDate = getLastWeeksDate().match(regex).join('');\nlet page = 0;\nconst NEWS_URL = `https://api.nytimes.com/svc/search/v2/articlesearch.json?q=movie&begin_date=${lastWeeksDate}&end_date=${today}&fq=Movies&page=${page}&sort=relevance&api-key=7V2Mdku3K6jAwbEoNcKctzHC7q7RRQcQ`;\nconst BASE_NEWS_IMG_URL = 'https://static01.nyt.com/';\n\nasync function getNewsFeed(url) {\n  try {\n    const result = await axios.get(url);\n\n    return result.data.response;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\ngetNewsFeed(NEWS_URL).then(newsArticles => {\n  renderNews(newsArticles.docs);\n});\n\nfunction renderNews(news) {\n  const newsFeedMarkup = news.map(item => createNewsCardMarkup(item)).join('');\n\n  document\n    .querySelector('.newsfeed')\n    .insertAdjacentHTML('beforeend', newsFeedMarkup);\n}\n\nfunction createNewsCardMarkup(newsItem) {\n  const {\n    byline: { original: author = 'Anonymous' },\n    pub_date: publishedAt,\n    headline: { main: title },\n    source: sourceName,\n    snippet: description,\n    web_url: url,\n    multimedia,\n    lead_paragraph: content,\n  } = newsItem;\n\n  const img = multimedia.find(item => /blog/.test(item.subtype));\n  let newsImg = '';\n\n  if (!img) {\n    newsImg = 'https://picsum.photos/400/300';\n  } else {\n    newsImg = BASE_NEWS_IMG_URL + img.url;\n  }\n\n  return `<li class=\"news-item-card\">\n            <img class=\"news-item-image\" src=\"${newsImg}\" alt=\"${description}\" loading=\"lazy\">            \n            <div class=\"news-item-content-wrapper\">\n                <h2 class=\"news-item-title\">${title}</h2>\n                <p class=\"news-item-description\"><b>Overview: </b>${description}</p>\n                <p class=\"news-item-content\">${content}</p>\n                <a class=\"news-item-btn\" href=\"${url}\" target=\"_blank\"><button type=\"button\" class=\"news-btn\">Read more</button></a>\n                <p class=\"news-item-source\"><b>Source: </b>${sourceName}</p>\n                <p class=\"news-item-author\"><b>Author: </b>${author}</p>\n                <p class=\"news-item-date\"><b>Published At: </b>${publishedAt}</p>\n            </div>\n          </li>`;\n}\n\nfunction getLastWeeksDate() {\n  const now = new Date();\n\n  return new Date(now.getFullYear(), now.getMonth(), now.getDate() - 7)\n    .toISOString()\n    .slice(0, 10);\n}\n"],"names":["$2shzp","parcelRequire","$6f14e3e64ea58a5e$var$regex","$6f14e3e64ea58a5e$var$today","Date","toISOString","slice","match","join","$6f14e3e64ea58a5e$var$lastWeeksDate","now","getFullYear","getMonth","getDate","$6f14e3e64ea58a5e$var$getLastWeeksDate","async","url","$parcel$interopDefault","get","data","response","error","console","$6f14e3e64ea58a5e$var$getNewsFeed","then","newsArticles","news","newsFeedMarkup","map","item","newsItem","byline","original","author","pub_date","publishedAt","headline","main","title","source","sourceName","snippet","description","web_url","multimedia","lead_paragraph","content","img","find","test","subtype","newsImg","$6f14e3e64ea58a5e$var$createNewsCardMarkup","document","querySelector","insertAdjacentHTML","$6f14e3e64ea58a5e$var$renderNews","docs"],"version":3,"file":"newsfeed.06c87b78.js.map"}